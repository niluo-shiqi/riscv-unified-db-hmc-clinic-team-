<%#
  Copyright (c) AINEKKO.
  SPDX-License-Identifier: BSD-3-Clause-Clear
%>
<%= anchor_for_udb_doc_mmr(mmr.name) %>
= <%= mmr.name %>

*<%= mmr.long_name %>*

<%= mmr.description %>

== Attributes
[%autowidth]
|===
h| Defining Extension a| <%= mmr.defined_by_condition.to_asciidoc %>
h| Physical Address    | <%= "0x#{mmr.physical_address.to_s(16).upcase}" %>
h| Length         | <%= mmr.length_pretty %>
|===

== Format
<%# MMR has a known static length, so there is only one format to display -%>
.<%= mmr.name %> format
[wavedrom, ,svg,subs='attributes',width="100%"]
....
<%= JSON.dump mmr.wavedrom_desc(cfg_arch, mmr.length) %>
....

== Field Summary

[%autowidth,separator=@,float="center",align="center",cols="^,<,<,<",options="header",role="stretch"]
|===
@Name @ Location @ Type @ Reset Value

<%- mmr.fields.each do |field| -%>
@ <%= link_to_udb_doc_mmr_field(mmr.name, field.name) %>
@ <%= field.location_pretty %>
@ <%= field.type_pretty %>
@ <%= field.reset_value_pretty %>

<%- end -%>
|===


== Fields

<%- if mmr.fields.empty? -%>
This MMR has no fields.
<%- else -%>

<%- mmr.fields.each do |field| -%>
[[<%=mmr.name%>-<%=field.name%>-def]]
=== `<%= field.name %>`

[example]
****
Location::
<%= field.location_pretty %>

Description::
<%= field.description %>

Type::
<%= field.type_pretty %>

Reset value::
<%= field.reset_value_pretty %>

****

<%- end -%>
<%- end -%>
